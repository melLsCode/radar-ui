<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Futuristic Radar System</title>
  <style>
    body {
      background: black;
      color: #00ff99;
      font-family: 'Orbitron', sans-serif;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }

    .radar-container {
      position: relative;
      width: 400px;
      height: 400px;
      border: 2px solid #00ff99;
      border-radius: 50%;
      box-shadow: 0 0 30px #00ff99;
      overflow: hidden;
      margin-bottom: 20px;
    }

    .sweep {
      position: absolute;
      width: 100%;
      height: 100%;
      background: conic-gradient(rgba(0, 255, 153, 0.2) 0deg, transparent 60deg);
      border-radius: 50%;
      animation: rotate 4s linear infinite;
    }

    .blip {
      position: absolute;
      width: 10px;
      height: 10px;
      background: red;
      border-radius: 50%;
      box-shadow: 0 0 8px red;
      animation: pulse 1.2s infinite;
    }

    .missile {
      position: absolute;
      width: 15px;
      height: 15px;
      background: yellow;
      border-radius: 50%;
      box-shadow: 0 0 10px yellow;
    }

    .defense-missile {
      position: absolute;
      width: 10px;
      height: 10px;
      background: cyan;
      border-radius: 50%;
      box-shadow: 0 0 10px cyan;
      z-index: 10;
    }

    .defense-shield {
      position: absolute;
      width: 100%;
      height: 100%;
      border: 3px solid cyan;
      border-radius: 50%;
      box-shadow: 0 0 25px cyan;
      animation: shieldGlow 0.5s alternate infinite;
      display: none;
    }

    @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    @keyframes pulse {
      0% { transform: scale(0.8); opacity: 0.7; }
      100% { transform: scale(1.4); opacity: 0; }
    }

    @keyframes shieldGlow {
      0% { opacity: 0.6; }
      100% { opacity: 1; }
    }

    @keyframes explode {
      0% { transform: scale(0.5); opacity: 1; }
      100% { transform: scale(2); opacity: 0; }
    }

    .circle {
      position: absolute;
      width: 100%;
      height: 100%;
      border: 1px solid #00ff99;
      border-radius: 50%;
      opacity: 0.1;
    }

    .circle:nth-child(1) { width: 25%; height: 25%; top: 37.5%; left: 37.5%; }
    .circle:nth-child(2) { width: 50%; height: 50%; top: 25%; left: 25%; }
    .circle:nth-child(3) { width: 75%; height: 75%; top: 12.5%; left: 12.5%; }
    .circle:nth-child(4) { width: 100%; height: 100%; top: 0; left: 0; }

    .status {
      font-size: 24px;
      margin-bottom: 10px;
    }

    .blink-text {
      animation: blinkText 0.3s infinite alternate;
      color: red;
    }

    @keyframes blinkText {
      from { color: red; }
      to { color: #ff6666; }
    }

    #logPanel {
      color: lime;
      background: #111;
      padding: 10px;
      width: 300px;
      height: 150px;
      overflow-y: auto;
      font-size: 12px;
      border: 1px solid #00ff99;
      position: absolute;
      top: 20px;
      right: 20px;
    }

    button {
      padding: 10px 20px;
      background: black;
      color: red;
      font-family: 'Orbitron', sans-serif;
      border: 2px solid red;
      margin-top: 10px;
      cursor: pointer;
    }

    button:hover {
      background: #330000;
    }
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron&display=swap" rel="stylesheet">
</head>
<body>

  <div class="radar-container" id="radar">
    <div class="sweep"></div>
    <div class="defense-shield" id="defenseShield"></div>
    <div class="circle"></div>
    <div class="circle"></div>
    <div class="circle"></div>
    <div class="circle"></div>
  </div>

  <div class="status">
    Status: <span id="statusText">Scanning for threats...</span>
  </div>

  <button onclick="manualDefense()">ACTIVATE COUNTERMEASURE</button>

  <div id="logPanel"><strong>Radar Logs</strong><br></div>

  <!-- Audio -->
  <audio id="missileAlarm" src="https://actions.google.com/sounds/v1/alarms/digital_watch_alarm_long.ogg" preload="auto"></audio>
  <audio id="beep" src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg" preload="auto"></audio>
  <audio id="missileVoice" src="https://actions.google.com/sounds/v1/alarms/air_raid_siren.ogg" preload="auto"></audio>
  <audio id="explosionSound" src="https://actions.google.com/sounds/v1/explosions/explosion.ogg" preload="auto"></audio>

  <script>
    const radar = document.getElementById('radar');
    const statusText = document.getElementById('statusText');
    const beep = document.getElementById('beep');
    const missileVoice = document.getElementById('missileVoice');
    const missileAlarm = document.getElementById('missileAlarm');
    const explosionSound = document.getElementById('explosionSound');
    const shield = document.getElementById('defenseShield');

    function speak(text) {
      const msg = new SpeechSynthesisUtterance(text);
      msg.volume = 1;
      msg.rate = 1.1;
      msg.pitch = 1;
      msg.lang = "en-US";
      speechSynthesis.speak(msg);
    }

    function logEvent(text) {
      const panel = document.getElementById('logPanel');
      const entry = document.createElement('div');
      entry.textContent = `[${new Date().toLocaleTimeString()}] ${text}`;
      panel.appendChild(entry);
      panel.scrollTop = panel.scrollHeight;
    }

  function spawnEnemy() {
  const blip = document.createElement('div');
  blip.className = 'blip';
  const x = Math.random() * 90 + 5;
  const y = Math.random() * 90 + 5;
  blip.style.left = `${x}%`;
  blip.style.top = `${y}%`;

  radar.appendChild(blip);
  statusText.textContent = '‚ö†Ô∏è Enemy Detected!';
  beep.play();
  // speak("Enemy detected.");  // removed to avoid lag
  logEvent("üü° Enemy blip detected at X,Y");

  // üîÅ Track coordinates every second while blip is active
  let trackerInterval = setInterval(() => {
    const xCoord = Math.floor(Math.random() * 100);
    const yCoord = Math.floor(Math.random() * 100);
    logEvent(`üìç Tracking Target at (${xCoord}, ${yCoord})`);
  }, 1000);

  setTimeout(() => {
    blip.remove();
    clearInterval(trackerInterval);
    statusText.textContent = 'Scanning for threats...';
  }, 2000); // 4 seconds total track time
}



    function launchMissile() {
  const missile = document.createElement('div');
  missile.className = 'missile';

  // Choose a random side to spawn from
  const sides = ['top', 'bottom', 'left', 'right'];
  const side = sides[Math.floor(Math.random() * sides.length)];

  let x, y;
  const radarRect = radar.getBoundingClientRect();
  const centerX = radarRect.width / 2;
  const centerY = radarRect.height / 2;

  // Spawn missile at a side and set position
  if (side === 'top') {
    x = Math.random() * radarRect.width;
    y = -20;
  } else if (side === 'bottom') {
    x = Math.random() * radarRect.width;
    y = radarRect.height + 20;
  } else if (side === 'left') {
    x = -20;
    y = Math.random() * radarRect.height;
  } else if (side === 'right') {
    x = radarRect.width + 20;
    y = Math.random() * radarRect.height;
  }

  missile.style.left = `${x}px`;
  missile.style.top = `${y}px`;
  radar.appendChild(missile);

  launchDefenseMissile(missile); // this sends the blue interceptor

  statusText.textContent = 'üö®üöÄ Missile Incoming!';
  statusText.classList.add('blink-text');
  missileVoice.play();
  missileAlarm.play();
  speak("Warning! Incoming missile detected.");
  logEvent("üî¥ Missile incoming from " + side + "...");

  const intercepted = Math.random() > 0.3;
  const targetX = Math.random() * radarRect.width;
  const targetY = Math.random() * radarRect.height;


  const dx = targetX - x;
  const dy = targetY - y;
  const angle = Math.atan2(dy, dx);
  const speed = Math.random() * 1. + 0.5; // speed between 0.5 to 2.0


  if (intercepted) {
    shield.style.display = 'block';
    speak("Auto-defense shield activated.");
    logEvent("üõ°Ô∏è Shield activated...");
    setTimeout(() => {
      shield.style.display = 'none';
      speak("Threat neutralized.");
      logEvent("‚úÖ Threat neutralized");
    }, 3000);
  } else {
    speak("Shield failed to intercept.");
    logEvent("‚ö†Ô∏è Shield failed to intercept!");
  }

  function moveMissile() {
    x += Math.cos(angle) * speed;
    y += Math.sin(angle) * speed;
    missile.style.left = `${x}px`;
    missile.style.top = `${y}px`;

    const dist = Math.hypot(x - targetX, y - targetY);
    if (dist < 10) {
      explosionSound.play();
      const explosion = document.createElement('div');
      explosion.style.position = 'absolute';
      explosion.style.width = '40px';
      explosion.style.height = '40px';
      explosion.style.background = 'orange';
      explosion.style.borderRadius = '50%';
      explosion.style.left = `${targetX - 20}px`;
      explosion.style.top = `${targetY - 20}px`;
      explosion.style.boxShadow = '0 0 20px red';
      explosion.style.animation = 'explode 0.5s ease-out';
      radar.appendChild(explosion);
      setTimeout(() => explosion.remove(), 500);
      missile.remove();
      missileAlarm.pause();
      missileAlarm.currentTime = 0;
      statusText.textContent = 'Scanning for threats...';
      statusText.classList.remove('blink-text');
    } else {
      requestAnimationFrame(moveMissile);
    }
  }

  requestAnimationFrame(moveMissile);
}


    function manualDefense() {
      shield.style.display = 'block';
      speak("Manual countermeasure deployed.");
      statusText.textContent = 'üõ°Ô∏è Manual Defense Engaged';
      logEvent("üõ°Ô∏è Manual countermeasure activated");

      setTimeout(() => {
        shield.style.display = 'none';
        statusText.textContent = 'Scanning for threats...';
      }, 3000);
    }

    setInterval(spawnEnemy, Math.random() * 2000 + 3000);
    function missileWave() {
  const missileCount = Math.floor(Math.random() * 3) + 2; // 2 to 4 missiles per wave
  for (let i = 0; i < missileCount; i++) {
    setTimeout(() => {
      launchMissile();
    }, i * 1000); // Delay each missile by 1s for realism
  }
}

// Launch missile wave every 20 seconds
setInterval(missileWave, 30000);

    function launchDefenseMissile(targetMissile) {
      const defense = document.createElement('div');
      defense.className = 'defense-missile';

      // Start from radar center (200,200 for 400x400 radar)
      let dx = 200;
      let dy = 200;
      defense.style.left = `${dx}px`;
      defense.style.top = `${dy}px`;
      radar.appendChild(defense);

      const interval = setInterval(() => {
        const tx = parseFloat(targetMissile.style.left);
        const ty = parseFloat(targetMissile.style.top);

        const angle = Math.atan2(ty - dy, tx - dx);
        const speed = 4;
        dx += Math.cos(angle) * speed;
        dy += Math.sin(angle) * speed;

        defense.style.left = `${dx}px`;
        defense.style.top = `${dy}px`;

        const dist = Math.hypot(tx - dx, ty - dy);
        if (dist < 10) {
          // Intercept!
          clearInterval(interval);
          targetMissile.remove();
          defense.remove();
          explosionSound.play();
          statusText.textContent = 'üéØ Missile intercepted!';
          statusText.classList.remove('blink-text');
          logEvent("üí• Interceptor neutralized enemy missile!");

          const explosion = document.createElement('div');
          explosion.style.position = 'absolute';
          explosion.style.width = '40px';
          explosion.style.height = '40px';
          explosion.style.background = 'cyan';
          explosion.style.borderRadius = '50%';
          explosion.style.left = `${tx}px`;
          explosion.style.top = `${ty}px`;
          explosion.style.boxShadow = '0 0 20px white';
          explosion.style.animation = 'explode 0.5s ease-out';
          radar.appendChild(explosion);
          setTimeout(() => explosion.remove(), 500);
        }
      }, 30);
    }

  </script>
</body>
</html>
